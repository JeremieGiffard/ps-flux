(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(49)},49:function(e,t,a){"use strict";a.r(t);a(32);var r=a(0),n=a.n(r),o=a(8),c=a(3);var u=function(){return n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h1",null,"Pluralsight Administration"),n.a.createElement("p",null,"React, Flux, and React Router for ultra-responsive web apps."),n.a.createElement(c.b,{to:"about",className:"btn btn-primary"},"About"))},l=a(13),s=a(14),i=a(18),m=a(15),h=a(19),E=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"About"),n.a.createElement("p",null,"This app uses React."))}}]),t}(n.a.Component);var d=function(){var e={color:"orange"};return n.a.createElement("nav",null,n.a.createElement(c.c,{activeStyle:e,exact:!0,to:"/"},"Home")," | ",n.a.createElement(c.c,{activeStyle:e,to:"/courses"},"Courses")," | ",n.a.createElement(c.c,{activeStyle:e,to:"/about"},"About"))},b=a(10),f=a(28),g=new(a(29).Dispatcher),p={CREATE_COURSE:"CREATE_COURSE",LOAD_COURSES:"LOAD_COURSE",UPDATE_COURSE:"UPDATE_COURSE",DELETE_COURSE:"DELETE_COURSE",LOAD_AUTHORS:"LOAD_AUTHORS"},C=a(16),v=a(21),O=a.n(v),y=a(30);function S(e){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw a=e.sent,new Error(a);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){throw console.error("API call failed. "+e),e}var j=Object({NODE_ENV:"production",PUBLIC_URL:"/ps-flux"}).REACT_APP_API_URL+"/courses/";var U=Object({NODE_ENV:"production",PUBLIC_URL:"/ps-flux"}).REACT_APP_API_URL+"/authors/";var T=[],_=[],L=new(function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getCourses",value:function(){return T}},{key:"getCourseBySlug",value:function(e){return T.find(function(t){return t.slug===e})}},{key:"saveCourse",value:function(){}},{key:"getAuthors",value:function(){return _}}]),t}(f.EventEmitter));g.register(function(e){switch(e.actionType){case p.DELETE_COURSE:T=T.filter(function(t){return t.id!==parseInt(e.id,10)}),L.emitChange();break;case p.CREATE_COURSE:T.push(e.course),L.emitChange();break;case p.UPDATE_COURSE:T=T.map(function(t){return t.id===e.course.id?e.course:t}),L.emitChange();break;case p.LOAD_COURSES:T=e.courses,L.emitChange();break;case p.LOAD_AUTHORS:_=e.authors,L.emitChange()}});var k=L;var D=function(e){return n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Author ID"),n.a.createElement("th",null,"Category"),n.a.createElement("td",null,"\xa0"))),n.a.createElement("tbody",null,e.courses.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,n.a.createElement(c.b,{to:"/course/"+t.slug},t.title)),n.a.createElement("td",null,t.authorId),n.a.createElement("td",null,t.category),n.a.createElement("td",null,n.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return e.deleteCourse(t.id)},to:"/courses"},"Delete")))})))},N=a(11);function P(e){return function(e){return fetch(j+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(C.a)({},e,{authorId:parseInt(e.authorId,10)}))}).then(S).catch(R)}(e).then(function(t){g.dispatch({actionType:e.id?p.UPDATE_COURSE:p.CREATE_COURSE,course:t})})}function w(){return fetch(j).then(S).catch(R).then(function(e){g.dispatch({actionType:p.LOAD_COURSES,courses:e})})}function I(){return fetch(U).then(S).catch(R).then(function(e){g.dispatch({actionType:p.LOAD_AUTHORS,authors:e})})}function x(e){return(t=e,fetch(j+t,{method:"DELETE"}).then(S).catch(R)).then(function(){g.dispatch({actionType:p.DELETE_COURSE,id:e,toast:N.b.error("Course Deleted.")})});var t}var B=function(){var e=Object(r.useState)(k.getCourses()),t=Object(b.a)(e,2),a=t[0],o=t[1];function u(){o(k.getCourses())}return Object(r.useEffect)(function(){return k.addChangeListener(u),0===k.getCourses().length&&w(),function(){return k.removeChangeListener(u)}},[]),n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Courses"),n.a.createElement(c.b,{className:"btn btn-primary",to:"/course"},"Add Course"),n.a.createElement(D,{courses:a,deleteCourse:x}))},F=a(9);var H=function(){return n.a.createElement("div",null,n.a.createElement("h2",null,"Page Not Found"),n.a.createElement("p",null,"404 module like, for bogus URL"),n.a.createElement(c.b,{to:"/",className:"btn btn-primary"},"Back to Home"))},q=a(17);function J(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),n.a.createElement("div",{className:t},n.a.createElement("label",{htmlFor:e.id},e.label),n.a.createElement("div",{className:"field"},n.a.createElement("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value})),e.error&&n.a.createElement("div",{className:"alert alert-danger"},e.error))}J.defaultProps={error:""};var V=J;function M(e){var t="form-group";return e.error.length>0&&(t+=" has-error"),n.a.createElement("div",{className:t},n.a.createElement("label",{htmlFor:e.id},e.label),n.a.createElement("div",{className:"field"},n.a.createElement("select",{id:e.id,name:e.name,onChange:e.onChange,value:e.value,className:"form-control"},n.a.createElement("option",{value:"0"},"Select a Author"),e.authors.map(function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.name)}))),e.error&&n.a.createElement("div",{className:"alert alert-danger"},e.error))}M.defaultProps={error:""};var z=M;var G=function(e){return n.a.createElement("form",{onSubmit:e.onSubmit},n.a.createElement(V,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.course.title,error:e.errors.title}),n.a.createElement(z,{id:"author",name:"authorId",label:"Author",onChange:e.onChange,value:e.course.authorId,error:e.errors.authorId,authors:e.authors}),n.a.createElement(V,{id:"category",label:"Category",name:"category",onChange:e.onChange,value:e.course.category,error:e.errors.category}),n.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))},K=function(e){var t=Object(r.useState)({}),a=Object(b.a)(t,2),o=a[0],c=a[1],u=Object(r.useState)(k.getCourses()),l=Object(b.a)(u,2),s=l[0],i=l[1],m=Object(r.useState)({id:null,slug:"",title:"",authorId:null,category:""}),h=Object(b.a)(m,2),E=h[0],d=h[1],f=Object(r.useState)(k.getAuthors()),g=Object(b.a)(f,2),p=g[0],v=g[1];function O(){i(k.getCourses()),v(k.getAuthors())}return Object(r.useEffect)(function(){k.addChangeListener(O);var t=e.match.params.slug;return 0===s.length?(w(),I()):t&&d(k.getCourseBySlug(t)),function(){return k.removeChangeListener(O)}},[s.length,e.match.params.slug]),console.log(p),console.log(s),n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Manage Course"),n.a.createElement(G,{errors:o,course:E,authors:p,onChange:function(e){var t=e.target;d(Object(C.a)({},E,Object(q.a)({},t.name,t.value)))},onSubmit:function(t){t.preventDefault(),function(){var e={};return E.title||(e.title="Title is required"),E.authorId||(e.authorId="Author ID is required"),E.category||(e.category="Category is required"),c(e),0===Object.keys(e).length}()&&P(E).then(function(){e.history.push("/courses"),N.b.success("Course saved.")})}}))};a(48);var Q=function(){return n.a.createElement("div",{className:"container-fluid"},n.a.createElement(N.a,{autoClose:3e3,hideProgressBar:!0}),n.a.createElement(d,null),n.a.createElement(F.d,null,n.a.createElement(F.b,{path:"/",exact:!0,component:u}),n.a.createElement(F.b,{path:"/courses",component:B}),n.a.createElement(F.b,{path:"/about",component:E}),n.a.createElement(F.b,{path:"/course/:slug",component:K}),n.a.createElement(F.b,{path:"/course",component:K}),n.a.createElement(F.a,{from:"/about-page",to:"about"}),n.a.createElement(F.b,{component:H})))};Object(o.render)(n.a.createElement(c.a,null,n.a.createElement(Q,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.c5ff2717.chunk.js.map